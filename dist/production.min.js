function config(e){e.interceptors.push(["$rootScope",function(e){return e.loading=!1,function(t){e.loading=!0;var a=function(t){return e.loading=!1,t};return t.then(a,a)}}])}function candidatesService(e,t){function a(){var t=e({url:"http://stuartdotson.com/sunlightapi/candidates_json.php",method:"GET",cache:!0});return t.then(s,u)}function n(e){var a=r(e).then(function(e){return e.data[0]?t.all([i(e.data[0].id),o(e.data[0].id),c(e.data[0].id)]).then(function(e){return{contributors:e[0],industries:e[1],types:e[2]}}):!1});return a}function r(t){var a=t,n=a.split(" ");switch(n.length>2&&n.splice(2,n.length-1),n=n.join(" ")){case"CRUZ, RAFAEL":n="Ted Cruz";break;case"PERRY, JAMES":n="Rick Perry";break;case"SANTORUM, RICHARD":n="RICK SANTORUM"}var r=e({url:"http://transparencydata.org/api/1.0/entities.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",search:n,type:"politician",callback:"JSON_CALLBACK"}});return r}function i(t){var a=e({url:"http://transparencydata.org/api/1.0/aggregates/pol/"+t+"/contributors.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",callback:"JSON_CALLBACK"}});return a.then(d,u)}function o(t){var a=e({url:"http://transparencydata.org/api/1.0/aggregates/pol/"+t+"/contributors/industries.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",callback:"JSON_CALLBACK"}});return a.then(d,u)}function c(t){var a=e({url:"http://transparencydata.org/api/1.0/aggregates/pol/"+t+"/contributors/type_breakdown.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",callback:"JSON_CALLBACK"}});return a.then(d,u)}function s(e){return e.data.forEach(function(e){e.cash_on_hand=parseInt(e.cash_on_hand,10),e.total_receipts=parseInt(e.total_receipts,10),e.total_contributions=parseInt(e.total_contributions,10),e.total_disbursements=parseInt(e.total_disbursements,10),e.outstanding_loans=parseInt(e.outstanding_loans,10),e.expenditures_opposing=parseInt(e.expenditures_opposing,10),e.expenditures_supporting=parseInt(e.expenditures_supporting,10)}),e.data}function d(e){return e.data}function u(e){return e}var l={getCandidates:a,getCandidateDetails:n};return l}function cfaImage(){return{restrict:"E",link:function(e,t,a){if(a.src){var n=new Image;n.onload=function(){t.addClass("active")},t.append(n),n.src=a.src}}}}function candidateConfig(e){e.when("/candidate/:name",{templateUrl:"components/candidate/candidate.html",controller:"CandidateCtrl",resolve:{candidate:["candidatesService","$route",function(e,t){return e.getCandidateDetails(t.current.params.name)}],name:["$route",function(e){return e.current.params.name}]}})}function CandidateCtrl(e,t,a){e.name=a,e.candidate=t,e.contributors=t.contributors,e.industries=t.industries,e.typeBreakdown=t.types,e.options={responsive:!0};var n=a.split(",")[0].replace("'","");e.headshotsrc="./assets/images/"+n+".jpg";var r=[],i=[];e.industries&&e.industries.forEach(function(e){r.push(e.name),i.push(e.amount)}),e.labels=r,e.data=i}function config(e){e.when("/",{templateUrl:"components/home/home.html",controller:"HomeCtrl",resolve:{candidates:["candidatesService",function(e){return e.getCandidates()}]}}).otherwise({redirectTo:"/"})}function HomeCtrl(e,t){var a=[],n=[];t.forEach(function(e){a.push(e.name)}),e.filteredCandidates=t,e.$watchGroup(["criteria.sortBy","criteria.sortDirection","criteria.include"],function(t){n=[],a=[],e.filteredCandidates.forEach(function(e){n.push(parseInt(e[t[0]],10)),a.push(e.name)}),e.data=[n],e.labels=a}),e.candidates=t,e.labels=a,e.series=["Series A"],e.colours=[{fillColor:"#de7a60",strokeColor:"#de7a60",highlightFill:"#449e6b",highlightStroke:"#449e6b"}],e.options={responsive:!0,scaleLabel:function(e){return"$"+e.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},tooltipTemplate:function(e){return e.label?e.label+": $"+e.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e.value}},e.data=[n]}angular.module("campaignFinanceApp",["cfa.components.home","cfa.components.candidate","ngResource","ngAnimate"]).config(config),config.$inject=["$httpProvider"],angular.module("cfa.services.candidates",[]).factory("candidatesService",candidatesService),candidatesService.$inject=["$http","$q"],angular.module("cfa.directives.cfaImage",[]).directive("cfaImage",cfaImage),cfaImage.$inject=[],angular.module("cfa.components.candidate",["ngRoute","chart.js","cfa.directives.cfaImage"]).config(candidateConfig).controller("CandidateCtrl",CandidateCtrl),candidateConfig.$inject=["$routeProvider"],CandidateCtrl.$inject=["$scope","candidate","name"],angular.module("cfa.components.home",["ngRoute","cfa.services.candidates","chart.js"]).config(config).controller("HomeCtrl",HomeCtrl),config.$inject=["$routeProvider"],HomeCtrl.$inject=["$scope","candidates"];
//# sourceMappingURL=production.min.js.map