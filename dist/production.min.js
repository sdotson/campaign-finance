!function(){"use strict";function e(e){e.interceptors.push(["$rootScope",function(e){return e.loading=!1,function(t){e.loading=!0;var n=function(t){return e.loading=!1,t};return t.then(n,n)}}])}angular.module("campaignFinanceApp",["cfa.components.home","cfa.components.candidate","ngResource","ngAnimate"]).config(e),e.$inject=["$httpProvider"]}(),function(){"use strict";function e(e,t){function n(){var t=e({url:"http://stuartdotson.com/sunlightapi/candidates_json.php",method:"GET",cache:!0});return t.then(s,d)}function a(e){var n=r(e).then(function(e){return e.data[0]?t.all([i(e.data[0].id),o(e.data[0].id),c(e.data[0].id)]).then(function(e){return{contributors:e[0],industries:e[1],types:e[2]}}):!1});return n}function r(t){var n=t,a=n.split(" ");switch(a.length>2&&a.splice(2,a.length-1),a=a.join(" ")){case"CRUZ, RAFAEL":a="Ted Cruz";break;case"PERRY, JAMES":a="Rick Perry";break;case"SANTORUM, RICHARD":a="RICK SANTORUM"}var r=e({url:"http://transparencydata.org/api/1.0/entities.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",search:a,type:"politician",callback:"JSON_CALLBACK"}});return r}function i(t){var n=e({url:"http://transparencydata.org/api/1.0/aggregates/pol/"+t+"/contributors.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",callback:"JSON_CALLBACK"}});return n.then(u,d)}function o(t){var n=e({url:"http://transparencydata.org/api/1.0/aggregates/pol/"+t+"/contributors/industries.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",callback:"JSON_CALLBACK"}});return n.then(u,d)}function c(t){var n=e({url:"http://transparencydata.org/api/1.0/aggregates/pol/"+t+"/contributors/type_breakdown.json",method:"JSONP",cache:!0,params:{apikey:"5fb0ee006d904354961ae1e83e80011b",callback:"JSON_CALLBACK"}});return n.then(u,d)}function s(e){return e.data.forEach(function(e){e.cash_on_hand=parseInt(e.cash_on_hand,10),e.total_receipts=parseInt(e.total_receipts,10),e.total_contributions=parseInt(e.total_contributions,10),e.total_disbursements=parseInt(e.total_disbursements,10),e.outstanding_loans=parseInt(e.outstanding_loans,10),e.expenditures_opposing=parseInt(e.expenditures_opposing,10),e.expenditures_supporting=parseInt(e.expenditures_supporting,10)}),e.data}function u(e){return e.data}function d(e){return e}var l={getCandidates:n,getCandidateDetails:a};return l}angular.module("cfa.services.candidates",[]).factory("candidatesService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(){return{restrict:"E",link:function(e,t,n){if(n.src){var a=new Image;a.onload=function(){t.addClass("active")},t.append(a),a.src=n.src}}}}angular.module("cfa.directives.cfaImage",[]).directive("cfaImage",e),e.$inject=[]}(),function(){"use strict";function e(e){e.when("/candidate/:name",{templateUrl:"components/candidate/candidate.html",controller:"CandidateCtrl",resolve:{candidate:["candidatesService","$route",function(e,t){return e.getCandidateDetails(t.current.params.name)}],name:["$route",function(e){return e.current.params.name}]}})}function t(e,t,n){e.name=n,e.candidate=t,e.contributors=t.contributors,e.industries=t.industries,e.typeBreakdown=t.types,e.options={responsive:!0};var a=n.split(",")[0].replace("'","");e.headshotsrc="./assets/images/"+a+".jpg";var r=[],i=[];e.industries&&e.industries.forEach(function(e){r.push(e.name),i.push(e.amount)}),e.labels=r,e.data=i}angular.module("cfa.components.candidate",["ngRoute","chart.js","cfa.directives.cfaImage"]).config(e).controller("CandidateCtrl",t),e.$inject=["$routeProvider"],t.$inject=["$scope","candidate","name"]}(),function(){"use strict";function e(e){e.when("/",{templateUrl:"components/home/home.html",controller:"HomeCtrl",resolve:{candidates:["candidatesService",function(e){return e.getCandidates()}]}}).otherwise({redirectTo:"/"})}function t(e,t){var n=[],a=[];t.forEach(function(e){n.push(e.name)}),e.filteredCandidates=t,e.$watchGroup(["criteria.sortBy","criteria.sortDirection","criteria.include"],function(t){a=[],n=[],e.filteredCandidates.forEach(function(e){a.push(parseInt(e[t[0]],10)),n.push(e.name)}),e.data=[a],e.labels=n}),e.candidates=t,e.labels=n,e.series=["Series A"],e.colours=[{fillColor:"#de7a60",strokeColor:"#de7a60",highlightFill:"#449e6b",highlightStroke:"#449e6b"}],e.options={responsive:!0,scaleLabel:function(e){return"$"+e.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},tooltipTemplate:function(e){return e.label?e.label+": $"+e.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e.value}},e.data=[a]}angular.module("cfa.components.home",["ngRoute","cfa.services.candidates","chart.js"]).config(e).controller("HomeCtrl",t),e.$inject=["$routeProvider"],t.$inject=["$scope","candidates"]}();
//# sourceMappingURL=production.min.js.map